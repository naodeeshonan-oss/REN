<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>好きなイラストを作ろう</title>
  <style>
    body { font-family: system-ui, sans-serif; margin: 0; background:#fafafa; color:#222; }
    .container { max-width: 800px; margin: 0 auto; padding: 20px; } /* PCは幅800px以内、中央寄せ */
    h1 { font-size: 22px; margin-bottom: 16px; text-align: center; }
    .mode-buttons { display:flex; gap:12px; margin-bottom:20px; }
    .mode-buttons button {
      flex:1; padding:12px; font-size:16px; border-radius:8px;
      border:1px solid #ccc; background:#fff; cursor:pointer;
    }
    .mode-buttons button.active { background:#111; color:#fff; }
    .card { background:#fff; border:1px solid #ccc; border-radius:8px; padding:16px; margin-bottom:16px; }
    label { font-weight:600; display:block; margin:8px 0; }
    textarea, select, input[type="file"] { width:100%; padding:8px; border:1px solid #ccc; border-radius:6px; }
    .actions { display:flex; gap:12px; margin-top:16px; }
    .actions button { flex:1; padding:12px; font-size:16px; border-radius:8px; cursor:pointer; border:none; }
    .btn-main { background:#111; color:#fff; }
    .btn-sub { background:#eee; }
    .muted { color:#666; font-size:13px; margin-top:8px; text-align:center; }
  </style>
</head>
<body>
  <div class="container">
    <h1>🎨 好きなイラストを作ろう</h1>

    <!-- 3つのモードを選ぶボタン -->
    <div class="mode-buttons">
      <button id="btnFree">① 自由に作る</button>
      <button id="btnImg2Img">② 写真からキャラ化</button>
      <button id="btnInterrogate">③ 写真からタグ抽出</button>
    </div>

    <!-- 写真を選ぶ欄 -->
    <div id="imageBlock" class="card" style="display:none;">
      <label>写真を選んでください</label>
      <input type="file" id="fileInput" accept="image/*" />
    </div>

    <!-- プリセット -->
    <div id="presetBlock" class="card" style="display:none;">
      <label>作風プリセット（任意）</label>
      <select id="preset">
        <option value="">選ばない（自由に入力）</option>
        <option value="chibi">① かわいい・ちびキャラ風</option>
        <option value="mature">② 大人っぽいアニメ風</option>
        <option value="street">③ カジュアル・ストリート風</option>
      </select>
    </div>

    <!-- 自由テキスト -->
    <div id="promptBlock" class="card">
      <label id="promptLabel">好きな指示を入力してください</label>
      <textarea id="prompt" rows="4" placeholder="例：笑顔でピースサイン、白背景など"></textarea>
    </div>

    <!-- 補助オプション -->
    <div id="optionsBlock" class="card">
      <label><input type="checkbox" id="bgTransparent"> 背景を透過する</label>
      <label>背景を変更：</label>
      <select id="bgPreset">
        <option value="">（変更しない）</option>
        <option value="white background">白背景</option>
        <option value="simple pastel background">やわらかいパステル背景</option>
        <option value="street background">ストリート風背景</option>
      </select>
      <label><input type="checkbox" id="brightnessUp"> 明るさを少し上げる</label>
      <label><input type="checkbox" id="moodBoost"> 雰囲気をちょっとUP</label>
    </div>

    <!-- 実行ボタン -->
    <div id="actionsBlock" class="card">
      <div class="actions">
        <button class="btn-main" id="btnRun">生成する（3枚固定）</button>
        <button class="btn-sub" id="btnRunInterrogate" style="display:none;">写真からタグ抽出</button>
      </div>
      <p class="muted">※ ①自由に作る → 写真不要<br>※ ②キャラ化 → 写真必須<br>※ ③タグ抽出 → 写真必須</p>
      <p id="status" class="muted"></p>
    </div>
  </div>

  <script>
    const btnFree = document.getElementById("btnFree");
    const btnImg2Img = document.getElementById("btnImg2Img");
    const btnInterrogate = document.getElementById("btnInterrogate");

    const imageBlock = document.getElementById("imageBlock");
    const presetBlock = document.getElementById("presetBlock");
    const promptLabel = document.getElementById("promptLabel");
    const runInterrogateBtn = document.getElementById("btnRunInterrogate");

    let currentMode = "free";

    function setMode(mode) {
      currentMode = mode;
      btnFree.classList.remove("active");
      btnImg2Img.classList.remove("active");
      btnInterrogate.classList.remove("active");

      if (mode === "free") {
        btnFree.classList.add("active");
        imageBlock.style.display = "none";
        presetBlock.style.display = "none";
        runInterrogateBtn.style.display = "none";
        promptLabel.textContent = "好きなプロンプトを入れてください（自由入力）";
      } else if (mode === "img2img") {
        btnImg2Img.classList.add("active");
        imageBlock.style.display = "";
        presetBlock.style.display = "";
        runInterrogateBtn.style.display = "none";
        promptLabel.textContent = "追加したい指示があれば入力（任意）";
      } else if (mode === "interrogate") {
        btnInterrogate.classList.add("active");
        imageBlock.style.display = "";
        presetBlock.style.display = "none";
        runInterrogateBtn.style.display = "";
        promptLabel.textContent = "抽出したタグに追加したい指示を入力（任意）";
      }
    }

    btnFree.addEventListener("click", () => setMode("free"));
    btnImg2Img.addEventListener("click", () => setMode("img2img"));
    btnInterrogate.addEventListener("click", () => setMode("interrogate"));

    // 初期は「自由に作る」
    setMode("free");
  </script>
</body>
</html>
